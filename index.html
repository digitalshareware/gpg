<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>OpenPGP.js Symmetric Encrypt / Decrypt</title>

  <link rel="icon" type="image/png" sizes="32x32" href="assets/images/favicon-transparent.png">
  <script src="https://unpkg.com/openpgp@5.8.0/dist/openpgp.min.js"></script>

  <style>
    :root{
      --bg:#f5f7fb; --card:#ffffff; --accent:#2563eb; --muted:#6b7280;
      --success:#16a34a; --danger:#dc2626;
    }
    html,body{height:100%;margin:0;font-family:Inter,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:#111827}
    .app{max-width:980px;margin:0px auto;padding:10px 18px;}
    .header{display:flex;align-items:center;gap:12px;margin-bottom:14px}
    .logo{width:48px;height:48px;background:linear-gradient(135deg,#60a5fa,#2563eb);border-radius:8px;display:flex;align-items:center;justify-content:center;color:white;font-weight:700}
    h1{font-size:20px;margin:0}
    .card{background:var(--card);border-radius:8px;padding:14px;box-shadow:0 6px 18px rgba(15,23,42,0.06)}
    .tabs{display:flex;gap:8px;margin:12px 0}
    .tab{padding:8px 12px;border-radius:6px;cursor:pointer;background:transparent;color:var(--muted);border:1px solid transparent}
    .tab.active{background:linear-gradient(90deg,#eef2ff,#e0e7ff);color:var(--accent);border-color:rgba(37,99,235,0.12)}
    .row{display:flex;gap:12px;align-items:center;margin-bottom:10px}
    label{font-size:13px;color:#111827;margin-bottom:6px;display:block}
    input[type="password"], input[type="text"], textarea, .file-label{
      width:100%;padding:10px;border-radius:6px;border:1px solid #e5e7eb;background:white;font-size:13px;box-sizing:border-box;
    }
    textarea{min-height:140px;resize:vertical;font-family:ui-monospace,monospace}
    .two{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .btn{background:var(--accent);color:white;padding:8px 12px;border-radius:6px;border:none;cursor:pointer}
    .btn.ghost{background:transparent;color:var(--accent);border:1px solid rgba(37,99,235,0.12)}
    .small{padding:6px 10px;font-size:13px}
    .muted{color:var(--muted);font-size:13px}
    .notes{font-size:13px;color:var(--muted);margin-top:8px}
    .controls{display:flex;gap:8px;flex-wrap:wrap}
    .strength{font-weight:600}
    .inline{display:inline-flex;gap:8px;align-items:center}
    .filebox{border:1px dashed #e6edf8;padding:10px;border-radius:6px;background:#fbfdff}
    footer{margin-top:12px;font-size:12px;color:var(--muted)}
    .center{display:flex;align-items:center;justify-content:center}
    a {color: var(--accent);}
    body {
      font-family: Arial, sans-serif;
    }

    /* Overlay */
    .alert-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }

    /* Alert Box */
    .alert-box {
      background: #fff;
      padding: 20px;
      width: 300px;
      max-width: 90%;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      text-align: center;
      animation: fadeIn 0.3s ease-in-out;
    }

    .alert-box h2 {
      margin: 0 0 10px;
      font-size: 18px;
      color: #e63946;
    }

    .alert-box p {
      margin: 0 0 20px;
      font-size: 14px;
      color: #333;
    }

    .alert-box button {
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      background: #e63946;
      color: white;
      cursor: pointer;
      font-size: 14px;
      transition: background 0.2s;
    }

    .alert-box button:hover {
      background: #c82333;
    }


    /* Success Styling */
    .alert-success h2 {
      color: #2e7d32; /* green */
    }

    .alert-success button {
      background: #2e7d32;
    }

    .alert-success button:hover {
      background: #1b5e20;
    }

    /* Error Styling (reuse from earlier if needed) */
    .alert-error h2 {
      color: #e63946; /* red */
    }

    .alert-error button {
      background: #e63946;
    }

    .alert-error button:hover {
      background: #c82333;
    }

    @keyframes fadeIn {
      from {opacity: 0; transform: scale(0.8);}
      to {opacity: 1; transform: scale(1);}
    }


    .file-input {
      display: none; /* hide real file input */
    }

    .file-label {
      display: inline-block;   /* allow styling */
      padding: 6px 10px;       /* button padding */
      background-color: var(--accent);
      color: #fff;
      border-radius: 6px;
      font-size: 13px;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s;
      width: fit-content;      /* <-- key: width matches text */
      white-space: nowrap;     /* prevent wrapping */
    }

    .file-label:hover {
      background-color: #1e40af;
    }

    .file-name {
      margin-left: 10px;
      font-size: 13px;
      color: #333;
    }
  </style>
  <style>
    /* body {
      font-family: "Inter", system-ui, sans-serif;
      background: #0f172a;
      color: #e2e8f0;
      margin: 0;
      padding: 2rem;
    } */

    /* Toaster container */
    .toaster {
      position: fixed;
      bottom: 1.5rem;
      right: 1.5rem;
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
      z-index: 10000;
    }

    /* Toast */
    .toast {
      display: flex;
      align-items: center;
      gap: 0.9rem;
      min-width: 260px;
      max-width: 360px;
      padding: 0.9rem 1rem;
      border-radius: 14px;
      color: #fff;
      backdrop-filter: blur(12px) saturate(160%);
      background: rgba(30, 41, 59, 0.75);
      box-shadow: 0 8px 24px rgba(0,0,0,0.4);
      animation: slideIn 0.35s cubic-bezier(0.16, 1, 0.3, 1);
      position: relative;
      overflow: hidden;
    }

    .toast .icon {
      width: 22px;
      height: 22px;
      flex: 0 0 auto;
    }

    .toast .message {
      flex: 1;
      font-size: 14px;
      line-height: 1.4;
    }

    .toast .close-btn {
      background: transparent;
      border: none;
      color: inherit;
      font-size: 1.2rem;
      cursor: pointer;
      opacity: 0.7;
      transition: opacity 0.2s;
    }
    .toast .close-btn:hover { opacity: 1; }

    /* Variants with Tailwind-style colors */
    .toast.success { border-left: 5px solid #22c55e; }   /* green-500 */
    .toast.error   { border-left: 5px solid #ef4444; }   /* red-500 */
    .toast.info    { border-left: 5px solid #2563eb; }   /* blue-600 */
    .toast.warning { border-left: 5px solid #f59e0b; }   /* amber-500 */

    /* Progress bar */
    .toast .progress {
      position: absolute;
      bottom: 0;
      left: 0;
      height: 3px;
      background: rgba(255,255,255,0.6);
      transform-origin: left;
      animation: shrink linear forwards;
    }

    /* Animations */
    @keyframes slideIn {
      from { opacity: 0; transform: translateY(20px) scale(0.98); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }
    @keyframes slideOut {
      to { opacity: 0; transform: translateY(20px) scale(0.95); }
    }
    @keyframes shrink {
      from { transform: scaleX(1); }
      to { transform: scaleX(0); }
    }
  </style>
</head>
<body>
  <div class="toaster" id="toaster"></div>

  <div class="app">
    <!-- <div>
      <button onclick="showToast('File uploaded successfully!', 'success')">Success</button>
      <button onclick="showToast('OpenPGP.js failed to load.', 'error')">Error</button>
      <button onclick="showToast('New update available!', 'info')">Info</button>
      <button onclick="showToast('Low disk space warning.', 'warning')">Warning</button>
    </div> -->

    <div class="header">
      <div class="logo">PG</div>
      <div>
        <h1>OpenPGP.js ‚Äî Symmetric Encrypt / Decrypt</h1>
        <div class="muted">Passphrase-based encryption (AES256). Works in browser and Node.</div>

      </div>
      <div style="margin-left: auto;"><img height="50" src="assets/images/logo-transparent.png" alt="Digital Shareware"></div>
    </div>

    <div class="card">
      <div class="tabs" role="tablist">
        <div class="tab active" id="tab-encrypt" role="tab">üîê Encrypt</div>
        <div class="tab" id="tab-decrypt" role="tab">üîì Decrypt</div>
      </div>

      <!-- shared passphrase row -->
      <div style="display:flex;gap:12px;align-items:center;margin-bottom:12px">
        <div style="flex:1">
          <label for="passphrase">Passphrase</label>
          <div style="display:flex;gap:8px">
            <input id="passphrase" type="password" placeholder="Enter passphrase" />
            <button id="toggleShow" class="btn ghost small" type="button">Show</button>
          </div>
          <div style="display:flex;align-items:center;gap:10px;margin-top:8px">
            <div class="muted">Strength: <span id="strengthText" class="strength muted">‚Äî</span></div>
            <button class="btn ghost small" style="margin-left:auto" onclick="clearFields('passphrase')">Clear</button>
            <button id="copyPassphraseBtn" class="btn ghost small">Copy Passphrase</button>
            <button id="suggestBtn" class="btn ghost small">Passphrase Suggest</button>
          </div>
        </div>
      </div>

      <!-- Encrypt panel -->
      <div id="panel-encrypt">
        <div class="two">
          <div>
            <label for="plain">Plain text to encrypt <a style="float: right;padding-right: 5px;" href="javascript:void(0);" onclick="pasteFromClipboard('plain')">Paste</a></label>
            <textarea id="plain" placeholder="Type / paste plain text here..."></textarea>
            <div class="controls" style="margin-top:8px">
              <button id="encBtn" class="btn small">Encrypt</button>
              <button id="plainTextCopy" class="btn ghost small">Copy</button>
              <button id="encCopy" class="btn ghost small">Copy Encrypted</button>
              <button id="encSave" class="btn ghost small">Save Encrypted</button>
              <button onclick="clearFields('plainTextCopy')" class="btn ghost small">Clear</button>
              <!-- <div class="muted notes"><a href="javascript:void(0);" onclick="clearFields('plain')">Clear</a></div> -->
            </div>
          </div>

          <div>
            <label for="encrypted">Encrypted (ASCII-armored)</label>
            <textarea id="encrypted" placeholder="Encrypted output appears here..." readonly></textarea>
            <div class="muted notes">Tip: Use "Save Encrypted" to download the armored .asc text. You can also copy and paste into other tools. <a href="javascript:void(0);" onclick="clearFields('encrypted')">Clear</a></div>
          </div>
        </div>

        <hr style="margin:14px 0;border:none;border-top:1px solid #eef2ff" />

        <div>
          <label>Encrypt a file</label>
          <div class="filebox">
            <div style="display:flex;gap:8px;align-items:center">
              <input type="file" id="fileInputEnc" class="file-input">
              <label for="fileInputEnc" class="file-label">Choose File</label>
              <span class="file-name" id="fileNameEnc">No file chosen</span>
              <button id="encFileBtn" class="btn small" style="margin-left: auto;">Encrypt File & Download .gpg</button>
            </div>
            <div class="notes">Selected file will be encrypted with the passphrase and downloaded as a binary `.gpg` file.</div>
          </div>
        </div>
      </div>

      <!-- Decrypt panel (hidden initially) -->
      <div id="panel-decrypt" style="display:none">
        <div class="two">
          <div>
            <label for="cipherText">Encrypted text (ASCII-armored) <a style="float: right;padding-right: 5px;" href="javascript:void(0);" onclick="pasteFromClipboard('cipherText')">Paste</a></label>
            <textarea id="cipherText" placeholder="Paste armored encrypted text here..."></textarea>
            <div class="controls" style="margin-top:8px">
              <button id="decBtn" class="btn small">Decrypt</button>
              <button id="encryptedTextCopy" class="btn ghost small">Copy</button>
              <button id="decCopy" class="btn ghost small">Copy Decrypted</button>
              <button onclick="clearFields('cipherText')" class="btn ghost small">Clear</button>
              <!-- <div class="muted notes"><a href="javascript:void(0);" onclick="clearFields('cipherText')">Clear</a></div> -->
            </div>
          </div>

          <div>
            <label for="decrypted">Decrypted output</label>
            <textarea id="decrypted" placeholder="Decrypted text appears here..." readonly></textarea>
            <div class="muted notes">If decryption fails, check passphrase and make sure the armored block is complete. <a href="javascript:void(0);" onclick="clearFields('decrypted')">Clear</a></div>
          </div>
        </div>

        <hr style="margin:14px 0;border:none;border-top:1px solid #eef2ff" />

        <div>
          <label>Decrypt a .gpg file</label>
          <div class="filebox">
            <div style="display:flex;gap:8px;align-items:center">
              <input type="file" id="fileInputDec" class="file-input" accept=".gpg" />
              <label for="fileInputDec" class="file-label">Choose File</label>
              <span class="file-name" id="fileNameDec">No file chosen</span>
              <button id="decFileBtn" class="btn small" style="margin-left: auto;">Decrypt File & Download</button>
            </div>

            <div class="notes">Select a `.gpg` file encrypted with a passphrase. Decrypted bytes will be downloaded.</div>
          </div>
        </div>
      </div>

      <footer class="muted">OpenPGP.js v5 (browser). Interoperability with GPG/gnupg is generally good ‚Äî test round trips for your chosen algorithms.</footer>
    </div>
  </div>
  <!-- Alert Overlay -->
  <div id="customAlert" class="alert-overlay">
    <div id="alertBox" class="alert-box">
      <h2 id="alertTitle">Error</h2>
      <p id="alertMessage"></p>
      <button id="alertMessageBtn" onclick="closeAlert()">OK</button>
    </div>
  </div>

<script>
(async() => {
  // openpgp is loaded as global (openpgp)
  if (!window.openpgp) {
    showToast("OpenPGP.js failed to load.", "error");
    return;
  }
  // Shortcuts to UI
  const tabEnc = document.getElementById('tab-encrypt');
  const tabDec = document.getElementById('tab-decrypt');
  const panelEnc = document.getElementById('panel-encrypt');
  const panelDec = document.getElementById('panel-decrypt');

  const passInp = document.getElementById('passphrase');
  const toggleShow = document.getElementById('toggleShow');
  const strengthText = document.getElementById('strengthText');
  const suggestBtn = document.getElementById('suggestBtn');

  const plain = document.getElementById('plain');
  const encrypted = document.getElementById('encrypted');
  const encBtn = document.getElementById('encBtn');
  const copyPassphraseBtn = document.getElementById('copyPassphraseBtn');
  const encCopy = document.getElementById('encCopy');
  const plainTextCopy = document.getElementById('plainTextCopy');
  const encryptedTextCopy = document.getElementById('encryptedTextCopy');
  const encSave = document.getElementById('encSave');
  const fileInputEnc = document.getElementById('fileInputEnc');
  const fileNameEnc = document.getElementById('fileNameEnc');
  const encFileBtn = document.getElementById('encFileBtn');

  const cipherText = document.getElementById('cipherText');
  const decrypted = document.getElementById('decrypted');
  const decBtn = document.getElementById('decBtn');
  const decCopy = document.getElementById('decCopy');
  const fileInputDec = document.getElementById('fileInputDec');
  const fileNameDec = document.getElementById('fileNameDec');
  const decFileBtn = document.getElementById('decFileBtn');

  // Tab switching
  function setActive(tab){
    if(tab === 'enc'){
      tabEnc.classList.add('active'); tabDec.classList.remove('active');
      panelEnc.style.display = ''; panelDec.style.display = 'none';
    } else {
      tabEnc.classList.remove('active'); tabDec.classList.add('active');
      panelEnc.style.display = 'none'; panelDec.style.display = '';
    }
  }
  tabEnc.addEventListener('click', ()=>setActive('enc'));
  tabDec.addEventListener('click', ()=>setActive('dec'));

  // Show / hide passphrase
  toggleShow.addEventListener('click', ()=>{
    if(passInp.type === 'password'){ passInp.type = 'text'; toggleShow.textContent = 'Hide'; }
    else { passInp.type = 'password'; toggleShow.textContent = 'Show'; }
  });

  // simple strength meter
  function strength(pass){
    if(!pass) return '‚Äî';
    let score = 0;
    if(pass.length >= 12) score++;
    if(/[A-Z]/.test(pass)) score++;
    if(/[a-z]/.test(pass)) score++;
    if(/\d/.test(pass)) score++;
    if(/[^A-Za-z0-9]/.test(pass)) score++;
    if(score <= 2) return 'Weak';
    if(score <= 4) return 'Medium';
    return 'Strong';
  }
  passInp.addEventListener('input', ()=>{ strengthText.textContent = strength(passInp.value); });

  // suggest passphrase
  suggestBtn.addEventListener('click', ()=>{
    // 16-char random (letters+digits+symbols)
    const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()-_+=?";
    let out = '';
    let passphrase_length = 32;
    for(let i=0;i<passphrase_length;i++) out += chars[Math.floor(Math.random()*chars.length)];
    passInp.value = out; passInp.dispatchEvent(new Event('input'));
  });

  // helper: download blob
  function downloadBlob(data, filename, type){
    const blob = new Blob([data], {type: type || 'application/octet-stream'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url; a.download = filename || 'download.bin';
    document.body.appendChild(a); a.click();
    a.remove(); URL.revokeObjectURL(url);
  }

  // Copy helper
  async function copyText(txt){
    try{
      await navigator.clipboard.writeText(txt);
      showToast('Copied to clipboard', 'success');
    }catch(e){
      // fallback
      const ta = document.createElement('textarea'); ta.value = txt; document.body.appendChild(ta);
      ta.select(); document.execCommand('copy'); ta.remove();
      showToast('Copied (fallback)', 'success');
    }
  }

  // Encrypt text (armored)
  encBtn.addEventListener('click', async ()=>{
    const pass = passInp.value;
    const pt = plain.value;
    if(!pass){ showToast('Enter a passphrase', 'error'); return; }
    if(!pt){ showToast('Enter plain text', 'error'); return; }
    try{
      encBtn.disabled = true;
      encBtn.textContent = 'Encrypting...';
      const message = await openpgp.createMessage({text: pt});
      const armored = await openpgp.encrypt({
        message,
        passwords: [pass],
        format: 'armored'
      });
      encrypted.value = armored;
    }catch(err){
      console.error(err); showToast('Encryption failed: ' + (err.message || err), 'error');
    }finally{ encBtn.disabled = false; encBtn.textContent = 'Encrypt'; }
  });

  copyPassphraseBtn.addEventListener('click', ()=> copyText(passInp.value));
  plainTextCopy.addEventListener('click', ()=> copyText(plain.value));
  encryptedTextCopy.addEventListener('click', ()=> copyText(cipherText.value));
  encCopy.addEventListener('click', ()=> copyText(encrypted.value));
  encSave.addEventListener('click', ()=> {
    if(!encrypted.value){ showToast('No encrypted text to save', 'error'); return; }
    downloadBlob(encrypted.value, 'encrypted.asc', 'text/plain;charset=utf-8');
  });

  // Encrypt file (binary .gpg)
  encFileBtn.addEventListener('click', async ()=>{
    const file = fileInputEnc.files[0];
    if(!file){ showToast('Pick a file first', 'error'); return; }
    const pass = passInp.value;
    if(!pass){ showToast('Enter passphrase', 'error'); return; }
    try{
      encFileBtn.disabled = true; encFileBtn.textContent = 'Encrypting...';
      const arrayBuf = await file.arrayBuffer();
      const message = await openpgp.createMessage({binary: new Uint8Array(arrayBuf)});
      const encryptedBinary = await openpgp.encrypt({
        message,
        passwords: [pass],
        format: 'binary' // returns Uint8Array
      });
      // download as binary .gpg
      downloadBlob(encryptedBinary, file.name + '.gpg', 'application/octet-stream');
    }catch(err){
      console.error(err); showToast('File encryption failed: ' + (err.message || err), 'error');
    }finally{ encFileBtn.disabled = false; encFileBtn.textContent = 'Encrypt File & Download .gpg'; }
  });

  // Decrypt armored text
  decBtn.addEventListener('click', async ()=>{
    const pass = passInp.value;
    const armored = cipherText.value;
    if(!pass){ showToast('Enter passphrase', 'error'); return; }
    if(!armored){ showToast('Paste armored encrypted text', 'error'); return; }
    try{
      decBtn.disabled = true; decBtn.textContent = 'Decrypting...';
      const message = await openpgp.readMessage({armoredMessage: armored});
      const { data: decryptedTxt } = await openpgp.decrypt({
        message,
        passwords: [pass],
        format: 'utf8'
      });
      decrypted.value = decryptedTxt;
    }catch(err){
      console.error(err); showToast('Decryption failed: ' + (err.message || err), 'error');
    }finally{ decBtn.disabled = false; decBtn.textContent = 'Decrypt'; }
  });

  decCopy.addEventListener('click', ()=> copyText(decrypted.value));

  // Decrypt file (.gpg) -> download decrypted bytes
  decFileBtn.addEventListener('click', async ()=>{
    const file = fileInputDec.files[0];
    if(!file){ showToast('Pick a .gpg file', 'error'); return; }
    const pass = passInp.value;
    if(!pass){ showToast('Enter passphrase', 'error'); return; }
    try{
      decFileBtn.disabled = true; decFileBtn.textContent = 'Decrypting...';
      const arrayBuf = await file.arrayBuffer();
      const message = await openpgp.readMessage({binaryMessage: new Uint8Array(arrayBuf)});
      const { data: decryptedBinary } = await openpgp.decrypt({
        message,
        passwords: [pass],
        format: 'binary'
      });
      // decryptedBinary is Uint8Array
      downloadBlob(new Uint8Array(decryptedBinary), file.name.replace(/\.gpg$/i, '') || 'decrypted', 'application/octet-stream');
    }catch(err){
      console.error(err); showToast('File decryption failed: ' + (err.message || err), 'error');
    }finally{ decFileBtn.disabled = false; decFileBtn.textContent = 'Decrypt File & Download'; }
  });


  // const fileInputEnc = document.getElementById("fileInputEnc");
  // const fileNameEnc = document.getElementById("fileNameEnc");
  // const fileInputDec = document.getElementById("fileInputDec");
  // const fileNameDec = document.getElementById("fileNameDec");

  fileInputEnc.addEventListener("change", function () {
    if (this.files.length > 0) {
      fileNameEnc.textContent = this.files[0].name;
    } else {
      fileNameEnc.textContent = "No file chosen";
    }
  });
  fileInputDec.addEventListener("change", function () {
    if (this.files.length > 0) {
      fileNameDec.textContent = this.files[0].name;
    } else {
      fileNameDec.textContent = "No file chosen";
    }
  });



  // Load encrypted file into textbox (optional UX)
  fileInputDec.addEventListener('change', async (ev)=>{
    const f = ev.target.files[0];
    if(!f) return;
    // don't auto-read binary into armored textbox; keep for explicit decrypt button
  });

  // Ctrl+A support in textareas and inputs
  function selectAllHandler(e){
    const el = e.target;
    const tag = el.tagName.toLowerCase();
    if(tag === 'textarea'){
      el.select();
      e.preventDefault();
    }else if(tag === 'input'){
      el.select();
      e.preventDefault();
    }
  }
  document.addEventListener('keydown', (e)=>{
    if((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 'a'){
      selectAllHandler(e);
    }
  });

  // initialize strength text
  strengthText.textContent = strength(passInp.value);

  // accessibility: focus first textarea
  plain.focus();
})();
</script>
<script>
  function clearFields(fieldId) {
    document.getElementById(fieldId).value = "";
  }
  async function pasteFromClipboard(fieldId) {
    try {
      const text = await navigator.clipboard.readText();
      document.getElementById(fieldId).value = text;
    } catch (err) {
      showToast("Failed to read clipboard: " + err, "error");
    }
  }
  function showAlert(message, type = "success") {

    const overlay = document.getElementById("customAlert");
    const alertBox = document.getElementById("alertBox");
    const title = document.getElementById("alertTitle");
    const msg = document.getElementById("alertMessage");

    msg.textContent = message;

    if (type === "success") {
      title.textContent = "Success";
      alertBox.className = "alert-box alert-success";
    } else {
      title.textContent = "Error";
      alertBox.className = "alert-box alert-error";
    }
    overlay.style.display = "flex";


    // document.getElementById("alertMessage").textContent = message;
    // document.getElementById("customAlert").style.display = "flex";
  }

  function closeAlert() {
    document.getElementById("customAlert").style.display = "none";
  }
</script>
<script>
  function showToast(message, type = "info", duration = 4000) {
    const toaster = document.getElementById("toaster");

    const toast = document.createElement("div");
    toast.className = `toast ${type}`;

    // SVG icons with Tailwind colors
    const icons = {
      success: `<svg class="icon" fill="none" stroke="#22c55e" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/></svg>`,
      error: `<svg class="icon" fill="none" stroke="#ef4444" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/></svg>`,
      info: `<svg class="icon" fill="none" stroke="#2563eb" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M13 16h-1v-4h-1m1-4h.01M12 20.5a8.5 8.5 0 1 0 0-17 8.5 8.5 0 0 0 0 17z"/></svg>`,
      warning: `<svg class="icon" fill="none" stroke="#f59e0b" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01M10.29 3.86L1.82 18a1.5 1.5 0 0 0 1.29 2.25h17.78a1.5 1.5 0 0 0 1.29-2.25L13.71 3.86a1.5 1.5 0 0 0-2.42 0z"/></svg>`
    };

    toast.innerHTML = `
      ${icons[type] || icons.info}
      <div class="message">${message}</div>
      <button class="close-btn">&times;</button>
      <div class="progress"></div>
    `;

    toaster.appendChild(toast);

    // Progress animation
    const progress = toast.querySelector(".progress");
    progress.style.animationDuration = duration + "ms";

    // Remove logic
    const removeToast = () => {
      toast.style.animation = "slideOut 0.3s forwards";
      setTimeout(() => toast.remove(), 300);
    };

    // Auto-remove
    const timer = setTimeout(removeToast, duration);

    // Manual close
    toast.querySelector(".close-btn").addEventListener("click", () => {
      clearTimeout(timer);
      removeToast();
    });
  }
</script>
</body>
</html>
